---
layout: default
title: TechnicalReference_IdentityManager
nav_order: 37
parent: Doc
---
{% raw %}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
     "http://www.w3.org/TR/html4/transitional.dtd">
<html>
<head>

  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <title></title>
  <meta name="generator" content="LibreOffice 24.2.7.2 (Linux)"/>
  <meta name="created" content="00:00:00"/>
  <meta name="changed" content="00:00:00"/>
</head>
<body>
<h1></h1>
<p> </p>
<p> </p>
<p> </p>
<p>  </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>MICROSAR Identity Manager </b></p>
<p>Technical Reference </p>
<p> </p>
<p>Post-Build Selectable </p>
<p>Version 1.1.1 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>Authors </p>
<p>Hannes Haas </p>
<p>Status </p>
<p>Released </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>2 / 22 </p>
<p><b>Document Information </b></p>
<p><b>History </b></p>
<p><b>Author </b></p>
<p><b>Date </b></p>
<p><b>Version </b></p>
<p><b>Remarks </b></p>
<p>Hannes Haas </p>
<p>2014-10-29 </p>
<p>1.0.0 </p>
<p>Creation </p>
<p>Hannes Haas </p>
<p>2015-01-26 </p>
<p>1.1.0 </p>
<p>ESCAN00080589: global root structure is </p>
<p>now a structure with one element for each </p>
<p>variant. </p>
<p>Global Root Structure Customization now </p>
<p>possible by configuring the ECUC module. </p>
<p>Hannes Haas </p>
<p>2015-03-03 </p>
<p>1.1.1 </p>
<p>Adapted file names of referred </p>
<p>documentations. </p>
<p><b>Reference Documents </b></p>
<p><b>No. </b></p>
<p><b>Source </b></p>
<p><b>Title </b></p>
<p><b>Version </b></p>
<p>[1] </p>
<p> Vector </p>
<p>TechnicalReference_PostBuildLoadable.pdf </p>
<p>as delivered </p>
<p>[2] </p>
<p> Vector </p>
<p>TechnicalReference_EcuM.pdf </p>
<p>as delivered </p>
<p>[3] </p>
<p> Vector </p>
<p>TechnicalReference_BswM.pdf </p>
<p>as delivered </p>
<p><b>Scope of the Document </b></p>
<p>This </p>
<p>technical </p>
<p>reference </p>
<p>describes </p>
<p>the </p>
<p>general </p>
<p>aspects </p>
<p>of </p>
<p>the </p>
<p>MICROSAR </p>
<p>Identity </p>
<p>Manager. </p>
<p>The </p>
<p>document </p>
<p>does </p>
<p>not </p>
<p>describe </p>
<p>BSW </p>
<p>module </p>
<p>specific </p>
<p>functionality </p>
<p>or </p>
<p>limitations  unless  this  is  essential  to  understand  the  overall  concept.  Module-specific </p>
<p>details can be found in the documentation of each BSW module. </p>
<p>This document focuses on BSW functionality. Configuration aspects are described in the </p>
<p>help system of DaVinci Configurator Pro. </p>
<p> </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>We have configured the programs in accordance with your specifications in the </p>
<p>questionnaire. Whereas the programs do support other configurations than the one </p>
<p>specified in your questionnaire, Vector´s release of the programs delivered to your </p>
<p>company is expressly restricted to the configuration you have specified in the </p>
<p>questionnaire. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>3 / 22 </p>
<p><b>Contents </b></p>
<p><b>1</b></p>
<p> </p>
<p><b>Introduction................................................................................................................... 5</b></p>
<p> </p>
<p>1.1</p>
<p> </p>
<p>Comparison to Post-Build Loadable ................................................................... 6</p>
<p> </p>
<p><b>2</b></p>
<p> </p>
<p><b>Functional Description ................................................................................................. 7</b></p>
<p> </p>
<p>2.1</p>
<p> </p>
<p>Technical Background ........................................................................................ 7</p>
<p> </p>
<p>2.2</p>
<p> </p>
<p>Features ............................................................................................................ 8</p>
<p> </p>
<p>2.3</p>
<p> </p>
<p>Deviations .......................................................................................................... 8</p>
<p> </p>
<p><b>3</b></p>
<p> </p>
<p><b>Workflow Overview ....................................................................................................... 9</b></p>
<p> </p>
<p>3.1</p>
<p> </p>
<p>Setting Up a Variant Project ............................................................................... 9</p>
<p> </p>
<p>3.2</p>
<p> </p>
<p>BSW Configuration .......................................................................................... 11</p>
<p> </p>
<p>3.3</p>
<p> </p>
<p>Variance in Application Code ............................................................................ 11</p>
<p> </p>
<p>3.3.1</p>
<p> </p>
<p>Variance of COM Signals ................................................................. 12</p>
<p> </p>
<p>3.3.2</p>
<p> </p>
<p>Variance in SWC and BSW APIs ...................................................... 12</p>
<p> </p>
<p>3.4</p>
<p> </p>
<p>Validation and Code Generation ...................................................................... 13</p>
<p> </p>
<p>3.5</p>
<p> </p>
<p>BSW Initialization ............................................................................................. 13</p>
<p> </p>
<p>3.5.1</p>
<p> </p>
<p>Manual BSW Initialization................................................................. 14</p>
<p> </p>
<p><b>4</b></p>
<p> </p>
<p><b>Configuration .............................................................................................................. 15</b></p>
<p> </p>
<p>4.1</p>
<p> </p>
<p>Activating Variance for BSW Modules .............................................................. 15</p>
<p> </p>
<p>4.2</p>
<p> </p>
<p>Semantics of ECU Configuration Variance ....................................................... 16</p>
<p> </p>
<p><b>5</b></p>
<p> </p>
<p><b>Integration ................................................................................................................... 18</b></p>
<p> </p>
<p>5.1</p>
<p> </p>
<p>BSW Module Initialization ................................................................................ 18</p>
<p> </p>
<p>5.1.1</p>
<p> </p>
<p>Implementation of EcuM_DeterminePbConfiguration() ..................... 19</p>
<p> </p>
<p>5.1.2</p>
<p> </p>
<p>BSWM Module Initialization Auto Configuration ................................ 19</p>
<p> </p>
<p>5.1.3</p>
<p> </p>
<p>Global Root Structure Customization ............................................... 20</p>
<p> </p>
<p>5.2</p>
<p> </p>
<p>Critical Sections ............................................................................................... 20</p>
<p> </p>
<p>5.3</p>
<p> </p>
<p>Main Function Scheduling ................................................................................ 20</p>
<p> </p>
<p><b>6</b></p>
<p> </p>
<p><b>Glossary and Abbreviations ...................................................................................... 21</b></p>
<p> </p>
<p>6.1</p>
<p> </p>
<p>Glossary .......................................................................................................... 21</p>
<p> </p>
<p>6.2</p>
<p> </p>
<p>Abbreviations ................................................................................................... 21</p>
<p> </p>
<p><b>7</b></p>
<p> </p>
<p><b>Contact ........................................................................................................................ 22</b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>4 / 22 </p>
<p><b>Illustrations </b></p>
<p>Figure 1-1</p>
<p> </p>
<p>Identity Manager use-case exampels ......................................................... 5</p>
<p> </p>
<p>Figure 2-1</p>
<p> </p>
<p><b>Variants </b>configurator editor in DaVinci Configurator Pro ............................ 7</p>
<p> </p>
<p>Figure 3-1</p>
<p> </p>
<p>Workflow overview ...................................................................................... 9</p>
<p> </p>
<p>Figure 3-2</p>
<p> </p>
<p>Major steps to setup a variant project with DaVinci Configurator Pro ........ 10</p>
<p> </p>
<p>Figure 3-3</p>
<p> </p>
<p>DaVinci Configurator Pro: Variant specific definition of input files .............. 10</p>
<p> </p>
<p>Figure 3-4</p>
<p> </p>
<p>Illustration of Variant Parameters in DaVinci Configurator Pro .................. 11</p>
<p> </p>
<p>Figure 4-1</p>
<p> </p>
<p>Enabling Variance for BSW Modules ........................................................ 15</p>
<p> </p>
<p>Figure 4-2</p>
<p> </p>
<p>Location of variation points has no semantic meaning to the </p>
<p>configuration ............................................................................................. 16</p>
<p> </p>
<p>Figure 5-1</p>
<p> </p>
<p>Hierarchy of BSW configuration structures for variant specific </p>
<p>initialization ............................................................................................... 18</p>
<p> </p>
<p>Figure 5-2</p>
<p> </p>
<p>Module Initialization Auto Configuration Assistant of the DaVinci </p>
<p>Configurator Pro BSWM configuration ...................................................... 19</p>
<p> </p>
<p><b> </b></p>
<p><b>Tables </b></p>
<p>Table 2-1 </p>
<p> </p>
<p>Supported features ..................................................................................... 8</p>
<p> </p>
<p>Table 2-2 </p>
<p> </p>
<p>Not supported features ............................................................................... 8</p>
<p> </p>
<p>Table 3-1 </p>
<p> </p>
<p>Manual BSW initialization using the configuration structure address </p>
<p>provided by ECUM.................................................................................... 14</p>
<p> </p>
<p>Table 6-1 </p>
<p> </p>
<p>Glossary ................................................................................................... 21</p>
<p> </p>
<p>Table 6-2 </p>
<p> </p>
<p>Abbreviations ............................................................................................ 21</p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>5 / 22 </p>
<p><b>1 </b></p>
<p><b>Introduction </b></p>
<p>The  MICROSAR  Identity  Manager  is  an  implementation  of  the  AUTOSAR  4  post-build </p>
<p>selectable concept. It allows the ECU manufacturer to include several BSW configurations </p>
<p>within  one  ECU.  At  start-up  the  application determines  the  BSW variant  to  be  activated </p>
<p>and initializes the BSW accordingly.  </p>
<p>The ultimate goal  of the Identity Manager is to reduce the number of ECU variants that </p>
<p>have </p>
<p>to </p>
<p>be </p>
<p>built, </p>
<p>stored </p>
<p>and  distributed.  The </p>
<p>Identity </p>
<p>Manager </p>
<p>thereby </p>
<p>focuses </p>
<p>on </p>
<p>communication  and  diagnostic  stack  variance.  Variance  of  the  application  (that  may  or </p>
<p>may not be required) has to be realized within the application internally. </p>
<p> </p>
<p>Figure 1-1 </p>
<p>Identity Manager use-case exampels </p>
<p>Typical use-cases for the Identity Manager: </p>
<p><b>&gt; </b></p>
<p>Usage of one ECU multiple times within one vehicle. Typically the variants have a very </p>
<p>similar behavior and communication description. An example may be the usage of an </p>
<p>ECU that is used as both, driver and passenger door module. </p>
<p><b>Identity Manager </b></p>
<p></p>
<p>2 (or n) in 1</p>
<p></p>
<p>One active</p>
<p><b>Door Left</b></p>
<p><b>Door Right</b></p>
<p><b>Carline </b></p>
<p>Revision 2</p>
<p><b>Carline</b></p>
<p>Revision 1</p>
<p><b>Identity Manager </b></p>
<p></p>
<p>1 in 2 (or n) </p>
<p></p>
<p>One active</p>
<p>ECUX</p>
<p>ECUX</p>
<p>ECUX</p>
<p>ECUX</p>
<p><b>2012</b></p>
<p><b>2016</b></p>
<p><b>Right Door</b></p>
<p><b>Left Door</b></p>
<p><b>Carline </b>Rev. 1</p>
<p><b>Carline </b>Rev. 2</p>
<p>Communication </p>
<p>Communication </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>6 / 22 </p>
<p><b>&gt; </b></p>
<p>Usage of an ECU in multiple vehicle architectures that have each distinct requirements </p>
<p>to the communication and diagnostic description </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>FAQ </b></p>
<p>One variant represents one complete set of functionality as required e.g. for the driver’s </p>
<p>door module. A variant is thereby an ECU global variant definition that can affect all </p>
<p>BSW modules and potentially the application. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>1.1 </b></p>
<p><b>Comparison to Post-Build Loadable </b></p>
<p>Post-Build Loadable allows downloading configuration sets to the ECU at a time after the </p>
<p>ECU has been build (e.g. end of line or in a workshop). This chapter points out in short the </p>
<p>major </p>
<p>differences </p>
<p>between </p>
<p>post-build </p>
<p>loadable </p>
<p>and </p>
<p>post-build </p>
<p>selectable </p>
<p>(Identity </p>
<p>Manager). Post-build loadable is a MICROSAR option that is available upon request. </p>
<p>Using the Identity Manager (an implementation of post-build selectable) all ECU variants </p>
<p>are  downloaded  to  the  ECUs  non-volatile  memory  (e.g.  flash)  at  ECU  build  time.  The </p>
<p>Identity  Manager  does  not  allow  modification  of  BSW  aspects  after  ECU  build  time.  If </p>
<p>changes are required a new ECU build has to be created. </p>
<p>Post-build loadable in contrast allows the modification of selected ECU parameters after </p>
<p>the ECU build time: at post-build time. The goal is to enable OEMs to update parts of the </p>
<p>ECU BSW behavior independently of the Tier1, who controls the ECU build environment. </p>
<p>On  request  Vector  can  provide  BSW  packages  that  support  both,  the  Identity  Manager </p>
<p>(post-build </p>
<p>selectable) </p>
<p>and </p>
<p>post-build </p>
<p>loadable. </p>
<p>This </p>
<p>will </p>
<p>allow </p>
<p>a </p>
<p>post-build </p>
<p>time </p>
<p>modification of variant ECU projects. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>7 / 22 </p>
<p><b>2 </b></p>
<p><b>Functional Description </b></p>
<p><b>2.1 </b></p>
<p><b>Technical Background </b></p>
<p>MICROSAR  Identity  Manager  is  based  on  the  post-build  selectable  variant  handling </p>
<p>defined  by AUTOSAR  4.  It  uses  variation  points  of  binding  time <b>PostBuild </b> in  the arxml </p>
<p>description files to define variance. </p>
<p>Variants – or according to AUTOSAR <i>Predefined Variants </i>– are defined based on a set of </p>
<p>criteria  settings  within  the  DaVinci  Configurator  Pro  Variants  Editor.  One  criterion  is  an </p>
<p>enumeration  that  allows  formal  definition  of  differences  in  the  ECU  configuration.  At </p>
<p>present  DaVinci  Configurator  Pro  supports  a  single  criterion  only.  The  default  name  is </p>
<p>Communication.  In  a  use-case  with  several  input  files,  one  Criteria  Value  is  created  for </p>
<p>each (non-variant) input file. Using the Variant Editor it is possible to combine the criteria </p>
<p>values to ECU Variants that are also visible as BSW configuration structures. </p>
<p> </p>
<p>Figure 2-1 </p>
<p><b>Variants </b>configurator editor in DaVinci Configurator Pro </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>Criteria are a modelling aid of the AUTOSAR schema and do not reflect directly on the </p>
<p>generated BSW code and the BSW configuration structures used for BSW initialization. </p>
<p>The generated configuration structures instead reflect the ECU variants that are based </p>
<p>on the selected criteria values. </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Workaround </b></p>
<p>DaVinci Configurator Pro is currently limited to a single criterion. The default name is </p>
<p><b>Communication</b>. Despite the name (that may be changed by the user), this criterion </p>
<p>can be used for both diagnostic and communication variance. </p>
<p>It is still possible to define multiple ECU variants by defining one criterion value for </p>
<p>each variant. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>8 / 22 </p>
<p><b>2.2 </b></p>
<p><b>Features </b></p>
<p>The following high-level features are supported: </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Supported Features </b></p>
<p> </p>
<p>Selection of the ECU variant at startup time of the ECU. Thereby one out of N available </p>
<p>configuration variants can be selected by the application. Implementing the logic that </p>
<p>determines the variant to be chosen is an application responsibility. </p>
<p></p>
<p> </p>
<p>The Identity Manager is supported by MICROSAR BSW modules that support the Feature </p>
<p><b>MICROSAR Identity Manager using Post-Build Selectable </b>(as it is listed in the technical </p>
<p>reference of the BSW module: Chapter <b>Functional Description </b></p>
<p><b></b></p>
<p><b> Features</b>). </p>
<p></p>
<p> </p>
<p>Variance of communication aspects such as signals, PDUs and their properties. </p>
<p></p>
<p> </p>
<p>Variance of communication channels such as the properties and the number of channels. </p>
<p></p>
<p> </p>
<p>Variance of the RTE data mapping that links the communication stack with the application </p>
<p>(SWCs).  </p>
<p></p>
<p> </p>
<p>Variance of diagnostic aspects such as DTCs and DIDs as well as some of their properties. </p>
<p></p>
<p> </p>
<p>Data deduplication that reduces RAM and ROM footage by eliminating redundant data from the </p>
<p>generated BSW configuration files. </p>
<p></p>
<p> </p>
<p>Combination with MICROSAR Post-Build Loadable [1]. Post-build loadable requires dedicated </p>
<p>licensing. </p>
<p></p>
<p> </p>
<p>The recommended maximum number of variants is 16. The maximum number of supported </p>
<p>variants is 32. On request higher numbers of variants may be supported. </p>
<p></p>
<p> </p>
<p>Table 2-1  </p>
<p>Supported features </p>
<p><b>2.3 </b></p>
<p><b>Deviations </b></p>
<p>The following features specified by AUTOSAR are currently not supported: </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Not Supported Features </b></p>
<p> </p>
<p>Variance of SWC and service-SWCs is currently not supported. </p>
<p>As a consequence variant SWC must provide a superset API and manage the variance </p>
<p>internally. The application must not invoke service-SWC and BSW APIs that are not defined in </p>
<p>the currently active variant. </p>
<p>- </p>
<p>DaVinci Configurator Pro supports a single criterion only. As this criterion can have multiple </p>
<p>values all use-cases can be covered. </p>
<p>- </p>
<p>Table 2-2  </p>
<p>Not supported features </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>9 / 22 </p>
<p><b>3 </b></p>
<p><b>Workflow Overview </b></p>
<p>This  chapter  highlights  the  most  important  aspects  of  the  workflow  that  is  required  to </p>
<p>realize  a  variant  ECU.  The  chapter  shall  be  seen  as  an  overview  but  already  provides </p>
<p>important information on the usage of this functionality. </p>
<p>More  details  can  be  found  in  the  following  chapters  and  the  online  help  of  DaVinci </p>
<p>Configurator Pro. </p>
<p> </p>
<p> </p>
<p>Figure 3-1 </p>
<p>Workflow overview </p>
<p><b>3.1 </b></p>
<p><b>Setting Up a Variant Project </b></p>
<p>Setting up a project with variance requires several steps which are summarized in Figure </p>
<p>3-2. The major difference between a workflow without variants is that variants need to be </p>
<p>defined  before  databases  are  added  to  the  configuration.  For  this  purpose  DaVinci </p>
<p>Configurator Pro provides the <b>Variants </b>editor (see screenshot in Figure 2-1). </p>
<p>Adding additional variants at a later point remains possible, however. </p>
<p>ODX</p>
<p>diag1</p>
<p>SYSEX</p>
<p>com1</p>
<p><b>DaVinci Configurator Pro</b></p>
<p>SYSEX</p>
<p>com2</p>
<p>ODX</p>
<p>diag2</p>
<p>SYSEX</p>
<p>com3</p>
<p>Variant</p>
<p>project</p>
<p>.dpa</p>
<p>arxml</p>
<p>Variant module configuration:</p>
<p>- Msn_Config_Eco</p>
<p>- Msn_Config_Easy</p>
<p>- Msn_Config_Star</p>
<p><b>Criterias</b></p>
<p><b>Variants</b></p>
<p>Eco</p>
<p>Easy</p>
<p>Star</p>
<p>Comm.</p>
<p>com1</p>
<p>com2</p>
<p>com3</p>
<p>Diagn.</p>
<p>diag1</p>
<p>diag1</p>
<p>diag2</p>
<p>Variance configuration</p>
<p>Static files:</p>
<p>Msn.c</p>
<p>MICROSAR SIP:</p>
<p>Code generation +</p>
<p>resource optimization</p>
<p>Application implements </p>
<p>variant selection at </p>
<p>startup:</p>
<p>if(rule == a)</p>
<p>use Msn_Config_Eco</p>
<p>if(rule == b)</p>
<p>use Msn_Config_Easy</p>
<p>if(rule == c)</p>
<p>use Msn_Config_Star</p>
<p>Build Environment</p>
<p>Variant ECU build:</p>
<p>Eco, Easy, Star</p>
<p>Production (OEM, Tier1)</p>
<p>Variant definition</p>
<p>One activated </p>
<p>variant (e.g. Eco)</p>
<p>Runtime</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>10 / 22 </p>
<p> </p>
<p>Figure 3-2 </p>
<p>Major steps to setup a variant project with DaVinci Configurator Pro </p>
<p>In a next step input files are assigned to each variant. Therefore a file set of input files is </p>
<p>created  for  each  criteria  value  (e.g.  Communication  =  Left).  A  file  set  consists  of  e.g. </p>
<p>multiple  legacy  files  (one  for  each  channel)  that  is  relevant  for  one  variant  or  a  single </p>
<p>system extract that describes all channels of one variant. </p>
<p> </p>
<p> </p>
<p>Figure 3-3 </p>
<p>DaVinci Configurator Pro: Variant specific definition of input files </p>
<p> </p>
<p>Create new project</p>
<p>Configure variants</p>
<p>Add input files and </p>
<p>perform a database </p>
<p>update</p>
<p>Enable variance for </p>
<p>BSW modules. Activate </p>
<p>additional modules. </p>
<p>(project settings)</p>
<p>Configure and </p>
<p>generate BSW modules</p>
<p>Create criterion</p>
<p>Create one criterion value </p>
<p>for each variant</p>
<p>Create variants and map </p>
<p>criterion value to Variant</p>
<p>Add input file(s) for each </p>
<p>criterion value</p>
<p>Trigger database update</p>
<p>Tool enters</p>
<p>„Update Pending“</p>
<p>project state</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>11 / 22 </p>
<p><b>3.2 </b></p>
<p><b>BSW Configuration </b></p>
<p>DaVinci Configurator Pro highlights variant parameter and container using a brown </p>
<p><i>[V]</i></p>
<p>. </p>
<p>When changing the configuration it has to be considered whether the change shall be </p>
<p>applied to all variants </p>
<p><i>[V]</i></p>
<p> or if the change shall be done only for one variant. </p>
<p> </p>
<p> </p>
<p>Figure 3-4 </p>
<p>Illustration of Variant Parameters in DaVinci Configurator Pro </p>
<p>If  required,  variation  points  can  be  added  to  the  configuration  and  linked  with  a  set  of </p>
<p>criteria  values  that  must  apply  to  include  that  configuration  element  into  one  variant.  If </p>
<p>required also custom criteria and criteria values can be defined. The criteria configuration </p>
<p>of a variation point will implicitly link the setting with one or several variants depending on </p>
<p>the variance configuration table. </p>
<p><b>3.3 </b></p>
<p><b>Variance in Application Code </b></p>
<p>The application code may or may not be affected by the variance in the BSW. If only the </p>
<p>CAN  IDs  or  Tx  modes  of  messages  are  different  in  each  variant  this  is  handled  in  a </p>
<p>transparent way for the application within the BSW. </p>
<p>Typically  ECU  variance  is  more  complex  and  also  involves  application  interfaces.  For </p>
<p>example the application may transmit or receive more signals in one variant than in the </p>
<p>other. Equally there may be different requirements to the diagnostic handling such as one </p>
<p>variant may have more features and thus may have more fault memory entries (DTCs) to </p>
<p>be managed. </p>
<p>As soon as the interface of the BSW provides variant-dependent functionality (e.g. a signal </p>
<p>or a DTC that exists in some of the variants only) the application will have to consider the </p>
<p>BSW variance when dealing with BSW APIs. </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>The application must not invoke any APIs that are not available in the variant that is </p>
<p>currently realized by the BSW. Even with enabled development error detection, the </p>
<p>BSW will not be able to detect all kinds of invalid API usage! </p>
<p>Undefined ECU behavior can be the result of calling APIs that are not available in the </p>
<p>active variant. </p>
<p><b> </b></p>
<p><b> </b></p>
<p>If  development  error  detection  (DET)  is  enabled,  the  MICROSAR  BSW  will  be  able  to </p>
<p>detect some faults related to accessing functionality that is not available in the activated </p>
<p>variants.  Due  to  technical  reasons,  not  all  faults  can  be  detected  and </p>
<p>be </p>
<p>handled </p>
<p>gracefully.  </p>
<p>When accessing BSW functionality that is not available in one variant (but in another) the </p>
<p>following faults may happen: </p>
<p><b>&gt; </b></p>
<p>Reporting of a development error if DET is enabled. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>12 / 22 </p>
<p><b>&gt; </b></p>
<p>Activation of a BSW functionality that is not related to the API call (e.g. a different </p>
<p>message is transmitted as requested by the API call). </p>
<p><b>&gt; </b></p>
<p>BSW API returns an error such as E_INVALID_REQUEST or E_UNINIT </p>
<p><b>&gt; </b></p>
<p>Undefined ECU behavior (with and without usage of development error detection) </p>
<p>The following sections give some advice, how the application can deal with variance in the </p>
<p>BSW. </p>
<p><b>3.3.1 </b></p>
<p><b>Variance of COM Signals </b></p>
<p>The  MICROSAR  RTE  supports  variant  data  mapping.  This  allows  e.g.  to  map  one </p>
<p>application  SWC  S/R  port  to  different  signals  depending  on  the  activated  variant.  If </p>
<p>required an S/R port can remain unconnected in one variant while in another variant a data </p>
<p>mapping is configured. </p>
<p>When accessing COM signals directly from a complex driver, only these signals must be </p>
<p>accessed at runtime that are configured for the activated variant. </p>
<p><b>3.3.2 </b></p>
<p><b>Variance in SWC and BSW APIs </b></p>
<p>MICROSAR BSW modules of the service layer generate a service SWC description that </p>
<p>describes the API in a formal way. MICROSAR service-SWCs define the BSW variance in </p>
<p>a non-formal way by providing the API superset of all BSW variants. As a consequence the </p>
<p>accessing  application SWC  must  only  invoke APIs  that  are  enabled  in  the  current  BSW </p>
<p>variant. The same applies for complex drivers that access BSW functionality directly. </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Example </b></p>
<p>Both  examples  realize  the  same  ECU  behavior  and  point  out  how  BSW </p>
<p>variance may be considered during application development. </p>
<p>This is an incomplete example only. Of course there are many other ways of taking </p>
<p>care that the application invokes only these BSW APIs that are valid in the variant that </p>
<p>is currently enabled. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>&gt; </b></p>
<p>Example 1 (SWC implementation): </p>
<p>if(Rte_IrvRead_Swc_Runnable_EcuVariant == V_ECO) </p>
<p>{ </p>
<p> </p>
<p>/* Service mapping to DEM ErrorX configured */ </p>
<p> </p>
<p>Rte_Call_DiagnosticMonitor_Port_SetEventStatus(DEM_EVENT_STATUS_PASSED); </p>
<p>} </p>
<p>else if(Rte_IrvRead_Swc_Runnable_EcuVariant == V_STAR) </p>
<p>{ </p>
<p> </p>
<p>/* DEM ErrorX is not defined in this variant and must not be reported */ </p>
<p>} </p>
<p>/* Variant Data Mapping to SigA for ECO and SigB for START managed by RTE */ </p>
<p>Rte_Write_Swc_Port(data); </p>
<p> </p>
<p><b>&gt; </b></p>
<p>Example 2 (CDD implementation): </p>
<p>if(gVariant == V_ECO) </p>
<p>{ </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>13 / 22 </p>
<p> </p>
<p>/* Report DEM ErrorX on V_ECO only */ </p>
<p> </p>
<p>Dem_SetEventStatus(ErrorX, DEM_EVENT_STATUS_PASSED); </p>
<p> </p>
<p>Com_SendSignal(SigA, &amp;data); /* SigA is defined in this variant only */ </p>
<p>} </p>
<p>else if(gVariant == V_STAR) </p>
<p>{ </p>
<p> </p>
<p>/* DEM ErrorX is not defined in this variant and must not be reported */ </p>
<p> </p>
<p>Com_SendSignal(SigB, &amp;data); /* SigB is defined in this variant only */ </p>
<p>} </p>
<p> </p>
<p><b>3.4 </b></p>
<p><b>Validation and Code Generation </b></p>
<p>The ECU configuration is validated and generated for all configured variants at the same </p>
<p>time.  </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Practical Procedure </b></p>
<p>To reduce overall complexity when setting up a new project it may be helpful to realize </p>
<p>a single ECU variant first. After having the first variant tested, additional variants may </p>
<p>be added and linked with the appropriate input files that are now imported for the first </p>
<p>time to this project. </p>
<p><b> </b></p>
<p><b> </b></p>
<p>The  BSW  module  configuration  must  be  valid  according  to  the  BSWMD  file  for  each </p>
<p>variant (e.g. variant parameters with a multiplicity of 1:1 must be available in all variants </p>
<p>but possibly with different values). </p>
<p>When </p>
<p>generating </p>
<p>code, </p>
<p>all </p>
<p>BSW </p>
<p>modules </p>
<p>that </p>
<p>are </p>
<p>enabled </p>
<p>for </p>
<p>variance </p>
<p>(DaVinci </p>
<p>Configurator  Pro <b> Project  Settings </b> editor)  will  produce  one  configuration  set  for  each </p>
<p>configured  ECU  variant. Variance  may  be  implemented by  the  BSW modules  as  part of </p>
<p>post-build tables (linked by the related configuration structures) or within generated source </p>
<p>code. </p>
<p>Validation rules at configuration and generation time ensure that MICROSAR modules that </p>
<p>do  not  support  variance  do  not  access  variant  data.  In  this  case  an  error  is  thrown.  To </p>
<p>solve  this  issue,  variance  may  have  to  be  enabled  for  the  affected  BSW  module  (see </p>
<p>chapter 4.1) or the variance has to be removed from the configuration. </p>
<p><b>3.5 </b></p>
<p><b>BSW Initialization </b></p>
<p>At ECU start-up, the application has to determine the expected ECU behavior and choose </p>
<p>the appropriate BSW configuration structures to initialize the BSW.  </p>
<p>Determining the required variant can be done in multiple ways and is typically defined by </p>
<p>the vehicle manufacturer. Examples are: </p>
<p><b>&gt; </b></p>
<p>External pin coding of the ECU e.g. by using specific connectors that allow the ECU to </p>
<p>detect its variant </p>
<p><b>&gt; </b></p>
<p>Definition of a non-volatile memory pattern that may be set end of line or during the </p>
<p>first start-up of the ECU </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>14 / 22 </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>If the variant of the ECU shall be changed, it may be required that some hardware </p>
<p>devices are disabled as these are no longer used in the variant to be enabled. The </p>
<p>BSW does not provide any functionality to disable hardware functionality that had been </p>
<p>enabled by a previous variant. Therefore it is recommended to completely restart the </p>
<p>ECU before activating a new BSW variant. Alternatively the application may also </p>
<p>disable hardware functionality required by the BSW prior of starting the BSW </p>
<p>initialization. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>3.5.1 </b></p>
<p><b>Manual BSW Initialization </b></p>
<p>If </p>
<p>for </p>
<p>some </p>
<p>reason </p>
<p>the </p>
<p>initialization </p>
<p>through </p>
<p>the </p>
<p>BSWM </p>
<p>“Module </p>
<p>Initialization”  Auto </p>
<p>Configuration  assistant  is  not  possible  the  BSW  initialization  can  also  be  implemented </p>
<p>manually.  </p>
<p>For </p>
<p>post-build </p>
<p>loadable </p>
<p>modules </p>
<p>the </p>
<p>header </p>
<p>EcuM_Init_PBcfg.h</p>
<p> </p>
<p>is </p>
<p>used </p>
<p>to </p>
<p>publish </p>
<p>initialization relevant data types. To access the module configuration pointers always use </p>
<p>EcuM_GlobalPBConfig_Ptr</p>
<p>.  </p>
<p>For variant modules that do not support post-build loadable the header </p>
<p>EcuM_Init_Cfg.h</p>
<p> is </p>
<p>used  to  publish  initialization  relevant  data  types.  To  access  the  module  configuration </p>
<p>pointers always use </p>
<p>EcuM_GlobalPCConfig_Ptr</p>
<p>.  </p>
<p> </p>
<p>#include “EcuM_Init_Cfg.h” </p>
<p>… </p>
<p>void MyInitFunction() </p>
<p>{ </p>
<p>… </p>
<p>  Com_Init(EcuM_GlobalPCConfig_Ptr-&gt;CfgPtr_Com_Init); </p>
<p>  ComM_Init(EcuM_GlobalPCConfig_Ptr-&gt;CfgPtr_ComM_Init); </p>
<p>… </p>
<p>}</p>
<p> </p>
<p>Table 3-1  </p>
<p>Manual BSW initialization using the configuration structure address provided by ECUM </p>
<p>The </p>
<p>EcuM_GlobalPBConfig_Ptr</p>
<p>  and </p>
<p>EcuM_GlobalPCConfig_Ptr</p>
<p> are initialized by the ECUM </p>
<p>during </p>
<p>EcuM_Init()</p>
<p> </p>
<p>with </p>
<p>the </p>
<p>global </p>
<p>root </p>
<p>structure </p>
<p>address </p>
<p>returned </p>
<p>by </p>
<p>the </p>
<p>callout </p>
<p>EcuM_DeterminePbConfiguration()</p>
<p>. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>15 / 22 </p>
<p><b>4 </b></p>
<p><b>Configuration </b></p>
<p>The DaVinci Configurator Pro help system (press F1 within the tool) will provide you with </p>
<p>information how to set up a configuration that includes variants. </p>
<p>This chapter highlights the most important aspects only. </p>
<p><b>4.1 </b></p>
<p><b>Activating Variance for BSW Modules </b></p>
<p>In the project settings editor of DaVinci Configurator Pro you can define each BSW module </p>
<p>whether  it  shall  support  variance  or  not.  It  is  recommended  to  enable  variance  for  a </p>
<p>complete cluster (e.g. communication stack or diagnostic stack) at once. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Basic Knowledge </b></p>
<p>As the BSW initialization sequence will handle the BSW modules variance, modules in </p>
<p>charge for BSW initialization (BSWM and ECUM) have to support variance in any case. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p>To enable variance for a BSW module choose either </p>
<p><b>&gt; </b></p>
<p>VARIANT-POST-BUILD-SELECTABLE</p>
<p>: Variants are supported. No post-build </p>
<p>loadable update of the configuration at post-build time. All variants are configured at </p>
<p>pre-compile time. </p>
<p><b>&gt; </b></p>
<p>VARIANT-POST-BUILD (LOADABLE and SELECTABLE)</p>
<p>: Variants are supported </p>
<p>and a post-build loadable update of the configuration data is supported using </p>
<p>MICROSAR Post-Build Loadable. This feature required dedicated licensing. </p>
<p> </p>
<p> </p>
<p>Figure 4-1 </p>
<p>Enabling Variance for BSW Modules </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Hint </b></p>
<p>You can use multi select in DaVinci Configurator Pro to enabled variance for several </p>
<p>BSW modules at the same time. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>16 / 22 </p>
<p> </p>
<p><b>4.2 </b></p>
<p><b>Semantics of ECU Configuration Variance </b></p>
<p>The location of the variation point does not imply any semantic and has no effect to the </p>
<p>generated  code.  Figure  4-2  illustrates  two  ECU  configuration  hierarchies  which  would </p>
<p>produce the same generated code as the content of configuration is equal when looking at </p>
<p>one  variant  at  a  time.  The  right  version  however  contains  more  redundant  data  as  the </p>
<p>variation point is located at a higher level.  </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Example </b></p>
<p>When editing B1 in the left example the change would apply for all variants as long as </p>
<p>no additional variation point is introduced first. When editing B1 in the right example, </p>
<p>the change is applied only to the variant where the change is made. The other instance </p>
<p>of B1 remains as it is. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p> </p>
<p>Figure 4-2 </p>
<p>Location of variation points has no semantic meaning to the configuration </p>
<p>As </p>
<p>the </p>
<p>example </p>
<p>shows, </p>
<p>the </p>
<p>location </p>
<p>of </p>
<p>the </p>
<p>variation </p>
<p>point  mainly </p>
<p>depends  on </p>
<p>the </p>
<p>expectations what shall or shall not be equal for an object within the different variants. A </p>
<p>general statement is therefore not possible. </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Practical Procedure </b></p>
<p>If it is not clear where to create a variation point (e.g. as the requirements or the impact </p>
<p>are not yet fully understood) it is recommended to create the variation points as low as </p>
<p>possible in order to handle with as few redundant data as possible. </p>
<p>At a later point when it turns out that an object is assumed to be completely different in </p>
<p>all variants a new variation point can be added at a higher level. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b> </b></p>
<p>[Eco]</p>
<p>[Easy]</p>
<p>M:Module</p>
<p>C:C1</p>
<p>A:A1</p>
<p>B:B1</p>
<p>P=1</p>
<p>P=2</p>
<p>[Eco]</p>
<p>[Easy]</p>
<p>M:Module</p>
<p>C:C1</p>
<p>A:A1</p>
<p>B:B1</p>
<p>P=1</p>
<p>C:C1</p>
<p>A:A1</p>
<p>B:B1</p>
<p>P=2</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>17 / 22 </p>
<p> </p>
<p><b>Note </b></p>
<p>The Base ECUC creation process of DaVinci Configurator Pro for example locates </p>
<p>variation points as low as possible in the hierarchy in order to reduce the amount of </p>
<p>redundant data within the project (left example in Figure 4-2). Having to deal with less </p>
<p>redundant data can simplify the BSW configuration when dealing with variants that </p>
<p>have also common settings. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>18 / 22 </p>
<p><b>5 </b></p>
<p><b>Integration </b></p>
<p><b>5.1 </b></p>
<p><b>BSW Module Initialization </b></p>
<p>During  BSW initialization  the application  is  required  to  provide  information  which  variant </p>
<p>the BSW shall implement. After ECUM initialization (that is variant independent) the ECUM </p>
<p>will </p>
<p>query </p>
<p>the </p>
<p>variant </p>
<p>to </p>
<p>be </p>
<p>used </p>
<p>from </p>
<p>the </p>
<p>application </p>
<p>by </p>
<p>using </p>
<p>the </p>
<p>callout </p>
<p>EcuM_DeterminePbConfiguration()</p>
<p> </p>
<p>(chapter </p>
<p>5.1.1). </p>
<p>Within </p>
<p>this </p>
<p>callout </p>
<p>the </p>
<p>application shall return the global root configuration structure (chapter 5.1.1) of the variant </p>
<p>to be used. </p>
<p>The  variant-specific  global  root  structure  references  the  configuration  structures  of  each </p>
<p>BSW module relevant of that variant. </p>
<p> </p>
<p> </p>
<p>Figure 5-1 </p>
<p>Hierarchy of BSW configuration structures for variant specific initialization </p>
<p>In </p>
<p>typical </p>
<p>BSW </p>
<p>environments </p>
<p>using </p>
<p>the </p>
<p>MICROSAR </p>
<p>stack, </p>
<p>no </p>
<p>further </p>
<p>actions </p>
<p>or </p>
<p>adaptations are required to the templates provided. </p>
<p>ECUM global</p>
<p>root structures</p>
<p>BSW A</p>
<p>Variant Eco</p>
<p>BSW A</p>
<p>Variant Easy</p>
<p>BSW B</p>
<p>Variant Eco</p>
<p>BSW B</p>
<p>Variant Easy</p>
<p>BSW configuration</p>
<p>structures</p>
<p>Pointer returned by the </p>
<p>application from callout </p>
<p>EcuM_DeterminePbConfiguration</p>
<p>Variant Eco</p>
<p>Variant Easy</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>19 / 22 </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Reference</b> </p>
<p>Please read the Technical References of ECUM ([2]) and BSWM ([3]) carefully to find </p>
<p>out how the BSW initialization needs to be implemented in general terms. </p>
<p>If you also realize a post-build time update of your configuration data using MICROSAR </p>
<p>Post-Build Loadable, please also follow [1]. </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>5.1.1 </b></p>
<p><b>Implementation of EcuM_DeterminePbConfiguration() </b></p>
<p>During </p>
<p>initialization </p>
<p>the </p>
<p>ECUM </p>
<p>invokes </p>
<p>the </p>
<p>callout </p>
<p>EcuM_DeterminePbConfiguration()</p>
<p> to determine the variant that shall be used for </p>
<p>BSW  initialization.  This  callout  shall  return  the  address  of  global  root  structure  of  the </p>
<p>variant to be used. </p>
<p>To </p>
<p>determine </p>
<p>the </p>
<p>address </p>
<p>use </p>
<p>e.g. </p>
<p>the </p>
<p>following </p>
<p>code: </p>
<p>&amp;EcuM_GlobalConfigRoot.&lt;Variant&gt;</p>
<p>. The symbol is published by </p>
<p>EcuM_Init_PBcfg.h</p>
<p>. </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>FAQ </b></p>
<p>EcuM_DeterminePbConfiguration()</p>
<p> is expected to return the pointer to the </p>
<p>global root structure (</p>
<p>&amp;EcuM_GlobalConfigRoot.&lt;Variant&gt;</p>
<p> ) published by </p>
<p>EcuM_Init_PBcfg.h</p>
<p> even in projects where post-build loadable is not supported.  </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>  </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Edit </b></p>
<p>A sample implementation of this function is provided by </p>
<p>EcuM_Callout_Stubs.c</p>
<p> as </p>
<p>a template. Extend this implementation with the application specific rules to determine </p>
<p>the root structure required for the variant that shall be used. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>5.1.2 </b></p>
<p><b>BSWM Module Initialization Auto Configuration </b></p>
<p>BSW  modules  with  variance  are  initialized  by  the  BSWM.  To  realize  the  BSW  module </p>
<p>initialization  use  the <b> Module  Initialization </b>Auto  Configuration  assistant  provided  by  the </p>
<p><b>BSW Management </b>editor of DaVinci Configurator Pro. This assistant will realize the BSW </p>
<p>initialization as required by the Identity Manager using the global root structure as source </p>
<p>for the BSW initialization pointers. Find more details in the BSWM technical reference [3]. </p>
<p> </p>
<p>Figure 5-2 </p>
<p>Module Initialization Auto Configuration Assistant of the DaVinci Configurator Pro BSWM configuration </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>20 / 22 </p>
<p><b>5.1.3 </b></p>
<p><b>Global Root Structure Customization </b></p>
<p>If an additional configuration pointer shall be added to the  global root structure you can </p>
<p>add the initialization details in the ECUC module configuration using DaVinci Configurator: </p>
<p>/MICROSAR/EcuC/EcucGeneral/BswInitialization/InitFunction</p>
<p>. </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>Within DaVinci Configurator only BSW modules that support the MICROSAR post-build </p>
<p>loadable process must be configured as Implementation Variant VARIANT-POST-</p>
<p>BUILD-LOADABLE or VARIANT-POST-BUILD. As a consequence these modules are </p>
<p>added to the post-build loadable global root structure </p>
<p>EcuM_Global<b>PB</b>ConfigRoot.</p>
<p> </p>
<p>Variant modules that do not support post-build loadable will be added to </p>
<p>EcuM_Global<b>PC</b>ConfigRoot</p>
<p> instead. </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>5.2 </b></p>
<p><b>Critical Sections </b></p>
<p>Critical  sections  are  not  variant-specific.  As  a  consequence  each  critical  section  has </p>
<p>exactly one implementation. One critical section can be used in just one variant but  can </p>
<p>also  be  used  in  several  or  even  all  ECU  variants.  The  technical  reference  of  the  BSW </p>
<p>modules will define what to consider when implementing the critical section handling. </p>
<p><b>5.3 </b></p>
<p><b>Main Function Scheduling </b></p>
<p>The RTE Schedule Manager is not variant aware. Consequently the main function cycles </p>
<p>are configured globally and are valid for all variants of the ECU.  </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>21 / 22 </p>
<p><b>6 </b></p>
<p><b>Glossary and Abbreviations </b></p>
<p><b>6.1 </b></p>
<p><b>Glossary </b></p>
<p><b>Term </b></p>
<p><b>Description </b></p>
<p>MICROSAR Identity </p>
<p>Manager </p>
<p>Implementation of the AUTOSAR 4 variance concept using post-build </p>
<p>selectable and variation points in the configuration data. </p>
<p>DaVinci Configurator </p>
<p>Pro </p>
<p>Vector´s configuration and generation tool for MICROSAR BSW and RTE </p>
<p>DaVinci Developer </p>
<p>Vector´s AUTOSAR SWC design editor </p>
<p>Table 6-1  </p>
<p>Glossary </p>
<p><b>6.2 </b></p>
<p><b>Abbreviations </b></p>
<p><b>Abbreviation </b></p>
<p><b>Description </b></p>
<p>API </p>
<p>Application Programming Interface </p>
<p> </p>
<p>AUTOSAR </p>
<p>Automotive Open System Architecture </p>
<p>BSW </p>
<p>Basis Software </p>
<p>CDD </p>
<p>Complex Drivers </p>
<p>DEM </p>
<p>Diagnostic Event Manager </p>
<p>DET </p>
<p>Development Error Tracer </p>
<p>IDM </p>
<p>MICROSAR Identity Manager </p>
<p>ECU </p>
<p>Electronic Control Unit </p>
<p>MICROSAR </p>
<p>Microcontroller Open System Architecture (the Vector AUTOSAR </p>
<p>solution) </p>
<p>RTE </p>
<p>Runtime Environment </p>
<p>SRS </p>
<p>Software Requirement Specification </p>
<p>SWC </p>
<p>Software Component </p>
<p>SWS </p>
<p>Software Specification </p>
<p>Table 6-2  </p>
<p>Abbreviations </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR Identity Manager </p>
<p></p>
<p>2015, Vector Informatik GmbH </p>
<p>Version: 1.1.1 </p>
<p>based on template version 5.7.1 </p>
<p>22 / 22 </p>
<p><b>7 </b></p>
<p><b>Contact </b></p>
<p>Visit our website for more information on </p>
<p> </p>
<p><b>&gt; </b></p>
<p>News </p>
<p><b>&gt; </b></p>
<p>Products </p>
<p><b>&gt; </b></p>
<p>Demo software </p>
<p><b>&gt; </b></p>
<p>Support </p>
<p><b>&gt; </b></p>
<p>Training data </p>
<p><b>&gt; </b></p>
<p>Addresses </p>
<p> </p>
<p>www.vector.com </p>
<p> </p>
<p> </p>
</body>
</html>
{% endraw %}