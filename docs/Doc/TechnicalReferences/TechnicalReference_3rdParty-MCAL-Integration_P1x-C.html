---
layout: default
title: TechnicalReference_3rdParty-MCAL-Integration_P1x-C
nav_order: 20
parent: Doc
---
{% raw %}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
     "http://www.w3.org/TR/html4/transitional.dtd">
<html>
<head>

  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <title></title>
  <meta name="generator" content="LibreOffice 24.2.7.2 (Linux)"/>
  <meta name="created" content="00:00:00"/>
  <meta name="changed" content="00:00:00"/>
</head>
<body>
<h1></h1>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>3rdParty MCAL Integration </b></p>
<p>Technical Reference </p>
<p> </p>
<p>Renesas RH850 P1M-C/P1H-C/P1H-CE </p>
<p>Version 1.0.0 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>Authors </p>
<p>Andrej Gazvoda </p>
<p>Status </p>
<p>Released </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference 3rdParty MCAL Integration </p>
<p>© 2018 Vector Informatik GmbH </p>
<p>Version 1.0.0 </p>
<p>2 </p>
<p>based on template version 6.0.1 </p>
<p><b>Document Information </b></p>
<p><b>History </b></p>
<p><b>Author </b></p>
<p><b>Date </b></p>
<p><b>Version </b></p>
<p><b>Remarks </b></p>
<p>Andrej Gazvoda </p>
<p>2018-06-08 </p>
<p>1.0.0 </p>
<p>Initial revision </p>
<p><b> </b></p>
<p><b>Reference Documents </b></p>
<p><b>No. </b></p>
<p><b>Source </b></p>
<p><b>Title </b></p>
<p><b>Version </b></p>
<p>[1] </p>
<p>Vector </p>
<p>TechnicalReference_3rdParty-MCAL-Integration.pdf </p>
<p>see delivery </p>
<p> </p>
<p><b>Scope of the Document </b></p>
<p>This document  contains  information  about  the  integration  of  3</p>
<p>rd</p>
<p>  Party  MCAL  into  Vector </p>
<p>software stack. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference 3rdParty MCAL Integration </p>
<p>© 2018 Vector Informatik GmbH </p>
<p>Version 1.0.0 </p>
<p>3 </p>
<p>based on template version 6.0.1 </p>
<p><b>Contents </b></p>
<p><b>1</b></p>
<p> </p>
<p><b>MCAL Integration .......................................................................................................... 4</b></p>
<p> </p>
<p>1.1</p>
<p> </p>
<p>Type of Integration ............................................................................................. 4</p>
<p> </p>
<p>1.2</p>
<p> </p>
<p>MCAL Location within SIP .................................................................................. 4</p>
<p> </p>
<p>1.3</p>
<p> </p>
<p>Supported 3</p>
<p>rd</p>
<p> Party Products ............................................................................. 4</p>
<p> </p>
<p>1.4</p>
<p> </p>
<p>Configuration Tools ............................................................................................ 5</p>
<p> </p>
<p><b>2</b></p>
<p> </p>
<p><b>Vector Comment ........................................................................................................... 6</b></p>
<p> </p>
<p>2.1</p>
<p> </p>
<p>Known Issues .................................................................................................... 6</p>
<p> </p>
<p>2.1.1</p>
<p> </p>
<p>Ver4.02.00 ......................................................................................... 6</p>
<p> </p>
<p>2.1.1.1</p>
<p> </p>
<p>Spi Module cannot be generated ..................................... 6</p>
<p> </p>
<p>2.1.1.2</p>
<p> </p>
<p>Fls Module Generation Mismatch ..................................... 6</p>
<p> </p>
<p>2.1.2</p>
<p> </p>
<p>Ver4.02.01 ......................................................................................... 6</p>
<p> </p>
<p>2.1.2.1</p>
<p> </p>
<p>Spi: Generation error regarding SpiClockFrequencyRef .. 6</p>
<p> </p>
<p>2.1.2.2</p>
<p> </p>
<p>Spi: Generation error regarding SpiEnableCs .................. 7</p>
<p> </p>
<p>2.1.2.3</p>
<p> </p>
<p>Generation error regarding FlsCpuFrequency .................. 7</p>
<p> </p>
<p><b>3</b></p>
<p> </p>
<p><b>Glossary and Abbreviations ........................................................................................ 8</b></p>
<p> </p>
<p>3.1</p>
<p> </p>
<p>Glossary ............................................................................................................ 8</p>
<p> </p>
<p>3.2</p>
<p> </p>
<p>Abbreviations ..................................................................................................... 8</p>
<p> </p>
<p><b>4</b></p>
<p> </p>
<p><b>Contact .......................................................................................................................... 9</b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference 3rdParty MCAL Integration </p>
<p>© 2018 Vector Informatik GmbH </p>
<p>Version 1.0.0 </p>
<p>4 </p>
<p>based on template version 6.0.1 </p>
<p><b>1 </b></p>
<p><b>MCAL Integration </b></p>
<p><b>1.1 </b></p>
<p><b>Type of Integration </b></p>
<p> </p>
<p><i>Comfort Integration </i></p>
<p>Vector tool DaVinci Configurator 5 is used for configuration </p>
<p> </p>
<p><b>&gt; </b></p>
<p>as comfort editor for Mcu component (clock tree) </p>
<p><b>&gt; </b></p>
<p>as generic editor for other MCAL modules </p>
<p> </p>
<p><i>Recommended workflow:  </i></p>
<p>Generation and changes in configuration are done in DaVinci Configurator. </p>
<p><b>1.2 </b></p>
<p><b>MCAL Location within SIP </b></p>
<p> </p>
<p>The  3</p>
<p>rd</p>
<p>  Party  MCAL  is  separated  from  the  Vector  parts  within  the  SIP.  Furthermore,  it </p>
<p>might  not  be  part  of  the  delivery.  In  this  case  please  refer  to  chapter  ‘First  Steps’  in </p>
<p>document</p>
<p> TechnicalReference_3rdParty-MCAL-Integration.pdf</p>
<p> [1]. </p>
<p> </p>
<p><b>1.3 </b></p>
<p><b>Supported 3</b></p>
<p><b>rd</b></p>
<p><b> Party Products </b></p>
<p>This integration supports the following Renesas targets: </p>
<p> </p>
<p><b></b></p>
<p><b> </b></p>
<p>RH850P1M-C </p>
<p><b></b></p>
<p><b> </b></p>
<p>RH850P1H-C </p>
<p><b></b></p>
<p><b> </b></p>
<p>RH850P1H-CE </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>Please refer to the Release Notes of the 3</p>
<p>rd</p>
<p> Party Products for further </p>
<p>information, e.g. regarding supported versions, derivatives and compilers. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>Please be aware that only official 3rdParty-Vendor releases are part of this Vector </p>
<p>integration package. Therefore any customer-specific releases cannot be considered. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference 3rdParty MCAL Integration </p>
<p>© 2018 Vector Informatik GmbH </p>
<p>Version 1.0.0 </p>
<p>5 </p>
<p>based on template version 6.0.1 </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p><b>Please contact the 3rdPartyVendor to find out if there are further Hotfixes </b></p>
<p><b>available for your Mcal package.  </b></p>
<p><b>It is essential to replace the affected MCAL parts in your original package </b></p>
<p><b>before you start Script_MCAL_Prepare.bat</b></p>
<p>.  </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>1.4 </b></p>
<p><b>Configuration Tools </b></p>
<p><b>&gt; </b></p>
<p>DaVinci Configurator 5 </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference 3rdParty MCAL Integration </p>
<p>© 2018 Vector Informatik GmbH </p>
<p>Version 1.0.0 </p>
<p>6 </p>
<p>based on template version 6.0.1 </p>
<p><b>2 </b></p>
<p><b>Vector Comment </b></p>
<p>Please </p>
<p>consider </p>
<p>the </p>
<p>attached </p>
<p>TechnicalReference_3rdParty-MCAL-</p>
<p>Integration.pdf</p>
<p> [1] for further information regarding Vector integration and setup of a </p>
<p>project. </p>
<p> </p>
<p><b>2.1 </b></p>
<p><b>Known Issues </b></p>
<p>The original MCAL package might contain errors. Necessary patches are provided via the </p>
<p>SIP  folder </p>
<p>ThirdParty\</p>
<p> </p>
<p>Mcal_Rh850P1xC\VectorIntegration\Patches\</p>
<p>  (called </p>
<p>'patch folder' in this chapter). </p>
<p> </p>
<p><b>2.1.1 </b></p>
<p><b>Ver4.02.00 </b></p>
<p><b>2.1.1.1 </b></p>
<p><b>Spi Module cannot be generated </b></p>
<p>The  reference  destination  of  the  configuration  parameter </p>
<p>SpiClockFrequencyRef </p>
<p>is </p>
<p>wrong in the Spi module description file. Therefore, no valid configuration can be created </p>
<p>and generation is not possible. </p>
<p>This issue has been reported to Renesas issue database with ARCAADA-613. </p>
<p>To  allow  generation  replace  the  file </p>
<p>R403_SPI_P1X-C.arxml</p>
<p>  in  the  3rdParty  MCAL </p>
<p>against  the  corrected  file  in  the  patch  folder  and  re-start  the  3rdParty  MCAL  Integration </p>
<p>Helper tool. </p>
<p> </p>
<p><b>2.1.1.2 </b></p>
<p><b>Fls Module Generation Mismatch </b></p>
<p>The </p>
<p>value </p>
<p>for </p>
<p>FLS_CPU_FREQUENCY_MHZ</p>
<p> </p>
<p>is </p>
<p>erroneously </p>
<p>generated </p>
<p>as </p>
<p>$ConversionHelper.floatToInt($frequency)U.</p>
<p>  </p>
<p>This issue has been reported to Renesas issue database with ARCAADA-618. </p>
<p>Renesas provided patches for the affected files </p>
<p>R403_FLS_P1X-C.arxml</p>
<p>, </p>
<p>Fls_Cfg_h</p>
<p>, </p>
<p>Fls_PBcfg_c</p>
<p>  and </p>
<p>Fls_Validate</p>
<p>  that  can  be  found  in  the  patch  folder.  Replace  the </p>
<p>related files from the 3rdParty  MCAL  and  re-start  the 3rdParty  MCAL  Integration  Helper </p>
<p>tool. </p>
<p> </p>
<p><b>2.1.2 </b></p>
<p><b>Ver4.02.01 </b></p>
<p><b>2.1.2.1 </b></p>
<p><b>Spi: Generation error regarding SpiClockFrequencyRef  </b></p>
<p>The  reference  destination  of  the  configuration  parameter </p>
<p>SpiClockFrequencyRef </p>
<p>is </p>
<p>wrong in the Spi module description file. The external Spi generator delivers the following </p>
<p>error message: </p>
<p>[CG_ERROR] - [ERR_59_83_087] References path of Parameter SpiClockFrequencyRef </p>
<p>is not correct in /ActiveEcuC/Spi/SpiDriver0/SpiExternalDevice0 </p>
<p>This issue has been reported to Renesas issue database with ARCAADA-639. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference 3rdParty MCAL Integration </p>
<p>© 2018 Vector Informatik GmbH </p>
<p>Version 1.0.0 </p>
<p>7 </p>
<p>based on template version 6.0.1 </p>
<p>To  allow  generation  replace  the  file </p>
<p>R403_SPI_P1X-C.arxml</p>
<p>  in  the  3rdParty  MCAL </p>
<p>against  the  corrected  file  in  the  patch  folder  and  re-start  the  3rdParty  MCAL  Integration </p>
<p>Helper tool. </p>
<p> </p>
<p><b>2.1.2.2 </b></p>
<p><b>Spi: Generation error regarding SpiEnableCs </b></p>
<p>The  generator  does  not  accept  the  values  &quot;true&quot;  and/or  &quot;false&quot;  and  instead  requires  &quot;1&quot; </p>
<p>and/or &quot;0&quot;. The external Spi generator delivers the following error message: </p>
<p>[CG_ERROR]  -  [ERR_59_83_121]  The  value  of  parameter  'SpiEnableCs'  in  the </p>
<p>container 'SpiExternalDevice' should not be configured as false, since the value </p>
<p>of the parameter 'SpiHwUnit' in the container 'SpiExternalDevice is configured </p>
<p>as CSIH </p>
<p>This issue has been reported to Renesas issue database with ARCAADA-640. </p>
<p>To  allow  generation  replace  the  generator's  template  and  validation  files </p>
<p>Spi_Cbk_h</p>
<p>, </p>
<p>Spi_Cfg_h</p>
<p>, </p>
<p>Spi_PBcfg_c</p>
<p> </p>
<p>and </p>
<p>Spi_Validate</p>
<p> </p>
<p>in </p>
<p>the  3rdParty  MCAL  against  the </p>
<p>corrected file in the patch folder and re-start the 3rdParty MCAL Integration Helper tool. </p>
<p> </p>
<p><b>2.1.2.3 </b></p>
<p><b>Generation error regarding FlsCpuFrequency </b></p>
<p>The generation of Fls module is not possible due to the following error delivered from the </p>
<p>external Fls generator: </p>
<p>[CG_ERROR] - [ERR_59_92_016] References path of Parameter FlsCpuFrequency is not </p>
<p>correct in /ActiveEcuC/Fls/FlsGeneral0/FlsDataFlash0 </p>
<p>This issue has been reported to Renesas issue database with ARCAADA-641. </p>
<p>To  allow  generation  replace  the  file </p>
<p>R403_FLS_P1X-C.arxml</p>
<p>  in  the  3rdParty  MCAL </p>
<p>against  the  corrected  file  in  the  patch  folder  and  re-start  the  3rdParty  MCAL  Integration </p>
<p>Helper tool. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference 3rdParty MCAL Integration </p>
<p>© 2018 Vector Informatik GmbH </p>
<p>Version 1.0.0 </p>
<p>8 </p>
<p>based on template version 6.0.1 </p>
<p><b>3 </b></p>
<p><b>Glossary and Abbreviations </b></p>
<p><b>3.1 </b></p>
<p><b>Glossary </b></p>
<p><b>Term </b></p>
<p><b>Description </b></p>
<p>3</p>
<p>rd</p>
<p>  party  components </p>
<p>/ MCAL </p>
<p>BSW  modules  not  provided  by  Vector.  Vector  may  have  integrated  the </p>
<p>software </p>
<p>within </p>
<p>the </p>
<p>SIP </p>
<p>but </p>
<p>does </p>
<p>not </p>
<p>take </p>
<p>over </p>
<p>any </p>
<p>responsibility </p>
<p>regarding functionality of these modules. </p>
<p>DaVinci Configurator  </p>
<p>Configuration and generation tool for Vector MICROSAR components </p>
<p> </p>
<p>Table 3-1  </p>
<p>Glossary </p>
<p> </p>
<p> </p>
<p><b>3.2 </b></p>
<p><b>Abbreviations </b></p>
<p><b>Abbreviation </b></p>
<p><b>Description </b></p>
<p>MCAL </p>
<p>Microcontroller Abstraction Layer </p>
<p> </p>
<p>AUTOSAR </p>
<p>Automotive Open System Architecture </p>
<p>SIP  </p>
<p>Software Integration Package (as provided by Vector) </p>
<p>Msn </p>
<p>Module Short Name derived from AUTOSAR </p>
<p>Table 3-2  </p>
<p>Abbreviations </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference 3rdParty MCAL Integration </p>
<p>© 2018 Vector Informatik GmbH </p>
<p>Version 1.0.0 </p>
<p>9 </p>
<p>based on template version 6.0.1 </p>
<p><b>4 </b></p>
<p><b>Contact </b></p>
<p>Visit our website for more information on </p>
<p> </p>
<p><b>&gt; </b></p>
<p>News </p>
<p><b>&gt; </b></p>
<p>Products </p>
<p><b>&gt; </b></p>
<p>Demo software </p>
<p><b>&gt; </b></p>
<p>Support </p>
<p><b>&gt; </b></p>
<p>Training data </p>
<p><b>&gt; </b></p>
<p>Addresses </p>
<p> </p>
<p>www.vector.com </p>
<p> </p>
<p> </p>
<p><b> </b></p>
</body>
</html>
{% endraw %}